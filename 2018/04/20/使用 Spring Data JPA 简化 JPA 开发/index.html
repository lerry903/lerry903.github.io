<!DOCTYPE html>
<html lang=zh>
<head>
    <meta charset="utf-8">
    
    <title>使用 Spring Data JPA 简化 JPA 开发 | LErry</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="_ Spring Data JPA 开发指南 _ 本文由浅入深地讲述了使用 Spring Data JPA 需要关注的各个方面，为读者了解和使用该框架提供了指导，可以作为 Spring Data JPA的学习指南。 从一个简单的 JPA 示例开始本文主要讲述 Spring Data JPA，但是为了不至于给 JPA 和 Spring 的初学者造成较大的学习曲线，我们首先从 JPA 开始，简单介绍一">
<meta property="og:type" content="article">
<meta property="og:title" content="使用 Spring Data JPA 简化 JPA 开发">
<meta property="og:url" content="https://www.itchina.top/2018/04/20/使用 Spring Data JPA 简化 JPA 开发/index.html">
<meta property="og:site_name" content="LErry">
<meta property="og:description" content="_ Spring Data JPA 开发指南 _ 本文由浅入深地讲述了使用 Spring Data JPA 需要关注的各个方面，为读者了解和使用该框架提供了指导，可以作为 Spring Data JPA的学习指南。 从一个简单的 JPA 示例开始本文主要讲述 Spring Data JPA，但是为了不至于给 JPA 和 Spring 的初学者造成较大的学习曲线，我们首先从 JPA 开始，简单介绍一">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-04-19T16:30:30.712Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="使用 Spring Data JPA 简化 JPA 开发">
<meta name="twitter:description" content="_ Spring Data JPA 开发指南 _ 本文由浅入深地讲述了使用 Spring Data JPA 需要关注的各个方面，为读者了解和使用该框架提供了指导，可以作为 Spring Data JPA的学习指南。 从一个简单的 JPA 示例开始本文主要讲述 Spring Data JPA，但是为了不至于给 JPA 和 Spring 的初学者造成较大的学习曲线，我们首先从 JPA 开始，简单介绍一">
    

    
        <link rel="alternate" href="/" title="LErry" type="application/atom+xml" />
    

    
        <link rel="icon" href="/css/images/shortcut_icon.png" />
    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">LErry</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">主页</a>
                
                    <a class="main-nav-link" href="/freebooks">书籍</a>
                
                    <a class="main-nav-link" href="/tags">标签</a>
                
                    <a class="main-nav-link" href="/archives">归档</a>
                
                    <a class="main-nav-link" href="/aboutme">关于</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/avatar.png" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">主页</a></td>
                
                    <td><a class="main-nav-link" href="/freebooks">书籍</a></td>
                
                    <td><a class="main-nav-link" href="/tags">标签</a></td>
                
                    <td><a class="main-nav-link" href="/archives">归档</a></td>
                
                    <td><a class="main-nav-link" href="/aboutme">关于</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/avatar.png" />
            <h2 id="name">LErry Li</h2>
            <h3 id="title">知我者谓我心忧，不知我者谓我何求</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Shanghai, China</span>
            <a id="follow" target="_blank" href="https://github.com/lerry903">关注我</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                65
                <span>文章</span>
            </div>
            <div class="article-info-block">
                54
                <span>标签</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/lerry903" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="mailto:lerryli@foxmail.com" target="_blank" title="envelope" class=tooltip>
                            <i class="fa fa-envelope"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="qq" class=tooltip>
                            <i class="fa fa-qq"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://weibo.com/5941010376" target="_blank" title="weibo" class=tooltip>
                            <i class="fa fa-weibo"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-使用 Spring Data JPA 简化 JPA 开发" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            使用 Spring Data JPA 简化 JPA 开发
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/04/20/使用 Spring Data JPA 简化 JPA 开发/">
            <time datetime="2018-04-19T16:34:21.448Z" itemprop="datePublished">2018-04-20</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Spring/">Spring</a>
    </div>

                        
                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>_ Spring Data JPA 开发指南 _</p>
<p>本文由浅入深地讲述了使用 Spring Data JPA 需要关注的各个方面，为读者了解和使用该框架提供了指导，可以作为 Spring Data JPA<br>的学习指南。</p>
<h2 id="从一个简单的-JPA-示例开始"><a href="#从一个简单的-JPA-示例开始" class="headerlink" title="从一个简单的 JPA 示例开始"></a>从一个简单的 JPA 示例开始</h2><p>本文主要讲述 Spring Data JPA，但是为了不至于给 JPA 和 Spring 的初学者造成较大的学习曲线，我们首先从 JPA 开始，简单介绍一个<br>JPA 示例；接着重构该示例，并引入 Spring 框架，这两部分不会涉及过多的篇幅，如果希望能够深入学习 Spring 和<br>JPA，可以根据本文最后提供的参考资料进一步学习。</p>
<p>自 JPA 伴随 Java EE 5 发布以来，受到了各大厂商及开源社区的追捧，各种商用的和开源的 JPA<br>框架如雨后春笋般出现，为开发者提供了丰富的选择。它一改之前 EJB 2.x 中实体 Bean 笨重且难以使用的形象，充分吸收了在开源社区已经相对成熟的<br>ORM 思想。另外，它并不依赖于 EJB 容器，可以作为一个独立的持久层技术而存在。目前比较成熟的 JPA 框架主要包括 Jboss 的 Hibernate<br>EntityManager、Oracle 捐献给 Eclipse 社区的 EclipseLink、Apache 的 OpenJPA 等。</p>
<p>本 文的示例代码基于 Hibernate EntityManager 开发，但是读者几乎不用修改任何代码，便可以非常容易地切换到其他 JPA<br>框架，因为代码中使用到的都是 JPA 规范提供的接口 /<br>类，并没有使用到框架本身的私有特性。示例主要涉及七个文件，但是很清晰：业务层包含一个接口和一个实现；持久层包含一个接口、一个实现、一个实体类；另 外加上一个<br>JPA 配置文件和一个测试类。相关类 / 接口代码如下：</p>
<h5 id="清单-1-实体类-AccountInfo-java"><a href="#清单-1-实体类-AccountInfo-java" class="headerlink" title="清单 1. 实体类 AccountInfo.java"></a>清单 1. 实体类 AccountInfo.java</h5><pre><code>1 @Entity 
2  @Table(name = &quot;t_accountinfo&quot;) 
3  public class AccountInfo implements Serializable { 
4  private Long accountId; 
5  private Integer balance; 
6 
7  // 此处省略 getter 和 setter 方法。
8  }
</code></pre><h5 id="清单-2-业务层接口-UserService-java"><a href="#清单-2-业务层接口-UserService-java" class="headerlink" title="清单 2. 业务层接口 UserService.java"></a>清单 2. 业务层接口 UserService.java</h5><pre><code>1  public interface UserService { 
2  　　public AccountInfo createNewAccount(String user, String pwd, Integer init); 
3  }
</code></pre><h5 id="清单-3-业务层的实现类-UserServiceImpl-java"><a href="#清单-3-业务层的实现类-UserServiceImpl-java" class="headerlink" title="清单 3. 业务层的实现类 UserServiceImpl.java"></a>清单 3. 业务层的实现类 UserServiceImpl.java</h5><pre><code> 1 public class UserServiceImpl implements UserService { 
 2 
 3  private UserDao userDao = new UserDaoImpl(); 
 4 
 5  public AccountInfo createNewAccount(String user, String pwd, Integer init){ 
 6  // 封装域对象
 7  AccountInfo accountInfo = new AccountInfo(); 
 8  UserInfo userInfo = new UserInfo(); 
 9  userInfo.setUsername(username); 
10  userInfo.setPassword(password); 
11  accountInfo.setBalance(initBalance); 
12  accountInfo.setUserInfo(userInfo); 
13  // 调用持久层，完成数据的保存
14  return userDao.save(accountInfo); 
15     } 
16  }
</code></pre><h5 id="清单-4-持久层接口"><a href="#清单-4-持久层接口" class="headerlink" title="清单 4. 持久层接口"></a>清单 4. 持久层接口</h5><pre><code>1  public interface UserDao { 
2      public AccountInfo save(AccountInfo accountInfo); 
3  }
</code></pre><h5 id="清单-5-持久层的实现类"><a href="#清单-5-持久层的实现类" class="headerlink" title="清单 5. 持久层的实现类"></a>清单 5. 持久层的实现类</h5><pre><code> 1 public class UserDaoImpl implements UserDao { 
 2      public AccountInfo save(AccountInfo accountInfo) { 
 3          EntityManagerFactory emf = Persistence.createEntityManagerFactory(&quot;SimplePU&quot;); 
 4          EntityManager em = emf.createEntityManager(); 
 5          em.getTransaction().begin(); 
 6          em.persist(accountInfo); 
 7          em.getTransaction().commit(); 
 8          emf.close(); 
 9          return accountInfo; 
10      } 
11  }    
</code></pre><h5 id="清单-6-JPA-标准配置文件-persistence-xml"><a href="#清单-6-JPA-标准配置文件-persistence-xml" class="headerlink" title="清单 6. JPA 标准配置文件 persistence.xml"></a>清单 6. JPA 标准配置文件 persistence.xml</h5><pre><code> 1 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; 
 2  &lt;persistence xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot; version=&quot;2.0&quot;&gt; 
 3  &lt;persistence-unit name=&quot;SimplePU&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt; 
 4  &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt; 
 5  &lt;class&gt;footmark.springdata.jpa.domain.UserInfo&lt;/class&gt; 
 6  &lt;class&gt;footmark.springdata.jpa.domain.AccountInfo&lt;/class&gt; 
 7  &lt;properties&gt; 
 8  &lt;property name=&quot;hibernate.connection.driver_class&quot;
 9  value=&quot;com.mysql.jdbc.Driver&quot;/&gt; 
10  &lt;property name=&quot;hibernate.connection.url&quot; 
11  value=&quot;jdbc:mysql://10.40.74.197:3306/zhangjp&quot;/&gt; 
12  &lt;property name=&quot;hibernate.connection.username&quot; value=&quot;root&quot;/&gt; 
13  &lt;property name=&quot;hibernate.connection.password&quot; value=&quot;root&quot;/&gt; 
14  &lt;property name=&quot;hibernate.dialect&quot;
15  value=&quot;org.hibernate.dialect.MySQL5Dialect&quot;/&gt; 
16  &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot;/&gt; 
17  &lt;property name=&quot;hibernate.format_sql&quot; value=&quot;true&quot;/&gt; 
18  &lt;property name=&quot;hibernate.use_sql_comments&quot; value=&quot;false&quot;/&gt; 
19  &lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;update&quot;/&gt; 
20  &lt;/properties&gt; 
21  &lt;/persistence-unit&gt; 
22  &lt;/persistence&gt;
</code></pre><h5 id="清单-7-本文使用如下的-main-方法进行开发者测试"><a href="#清单-7-本文使用如下的-main-方法进行开发者测试" class="headerlink" title="清单 7. 本文使用如下的 main 方法进行开发者测试"></a>清单 7. 本文使用如下的 main 方法进行开发者测试</h5><pre><code>1  public class SimpleSpringJpaDemo { 
2     public static void main(String[] args) { 
3         new UserServiceImpl().createNewAccount(&quot;ZhangJianPing&quot;, &quot;123456&quot;, 1); 
4     } 
5  }
</code></pre><h2 id="简述-Spring-框架对-JPA-的支持"><a href="#简述-Spring-框架对-JPA-的支持" class="headerlink" title="简述 Spring 框架对 JPA 的支持"></a>简述 Spring 框架对 JPA 的支持</h2><p>接下来我们引入 Spring，以展示 Spring 框架对 JPA 的支持。业务层接口 UserService 保持不变，UserServiceImpl<br>中增加了三个注解，以让 Spring 完成依赖注入，因此不再需要使用 new 操作符创建 UserDaoImpl 对象了。同时我们还使用了 Spring<br>的声明式事务：</p>
<h5 id="清单-8-配置为-Spring-Bean-的业务层实现"><a href="#清单-8-配置为-Spring-Bean-的业务层实现" class="headerlink" title="清单 8. 配置为 Spring Bean 的业务层实现"></a>清单 8. 配置为 Spring Bean 的业务层实现</h5><pre><code>1 @Service(&quot;userService&quot;) 
2  public class UserServiceImpl implements UserService { 
3  @Autowired 
4  private UserDao userDao; 
5 
6  @Transactional 
7  public AccountInfo createNewAccount( 
8  String name, String pwd, Integer init) { …… } 
9  }
</code></pre><p>对于持久层，UserDao 接口也不需要修改，只需修改 UserDaoImpl 实现，修改后的代码如下：</p>
<h5 id="清单-9-配置为-Spring-Bean-的持久层实现"><a href="#清单-9-配置为-Spring-Bean-的持久层实现" class="headerlink" title="清单 9. 配置为 Spring Bean 的持久层实现"></a>清单 9. 配置为 Spring Bean 的持久层实现</h5><pre><code> 1 @Repository(&quot;userDao&quot;) 
 2  public class UserDaoImpl implements UserDao { 
 3 
 4  @PersistenceContext 
 5  private EntityManager em; 
 6 
 7  @Transactional 
 8    public Long save(AccountInfo accountInfo) { 
 9  em.persist(accountInfo); 
10  return accountInfo.getAccountId(); 
11  } 
12  }
</code></pre><h5 id="清单-10-Spring-配置文件"><a href="#清单-10-Spring-配置文件" class="headerlink" title="清单 10. Spring 配置文件"></a>清单 10. Spring 配置文件</h5><pre><code> 1  &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; 
 2  &lt;beans...&gt; 
 3  &lt;context:component-scan base-package=&quot;footmark.springdata.jpa&quot;/&gt; 
 4  &lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;/&gt; 
 5  &lt;bean id=&quot;transactionManager&quot; 
 6  class=&quot;org.springframework.orm.jpa.JpaTransactionManager&quot;&gt; 
 7  &lt;property name=&quot;entityManagerFactory&quot; ref=&quot;entityManagerFactory&quot;/&gt; 
 8  &lt;/bean&gt; 
 9  &lt;bean id=&quot;entityManagerFactory&quot; class= 
10 &quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt; 
11     &lt;/bean&gt; 
12  &lt;/beans&gt;
</code></pre><h5 id="清单-11-改造后的基于-Spring-的开发者测试代码"><a href="#清单-11-改造后的基于-Spring-的开发者测试代码" class="headerlink" title="清单 11. 改造后的基于 Spring 的开发者测试代码"></a>清单 11. 改造后的基于 Spring 的开发者测试代码</h5><pre><code>1  public class SimpleSpringJpaDemo{ 
2  public static void main(String[] args){ 
3  ClassPathXmlApplicationContext ctx = 
4  new ClassPathXmlApplicationContext(&quot;spring-demo-cfg.xml&quot;); 
5  UserDao userDao = ctx.getBean(&quot;userDao&quot;, UserDao.class); 
6  userDao.createNewAccount(&quot;ZhangJianPing&quot;, &quot;123456&quot;, 1); 
7  } 
8  }
</code></pre><p>通过对比重构前后的代码，可以发现 Spring 对 JPA 的简化已经非常出色了，我们可以大致总结一下 Spring 框架对 JPA<br>提供的支持主要体现在如下几个方面：</p>
<ul>
<li>首先，它使得 JPA 配置变得更加灵活。JPA 规范要求，配置文件必须命名为 persistence.xml，并存在于类路径下的 META-INF 目录中。该文件通常包含了初始化 JPA 引擎所需的全部信息。Spring 提供的 LocalContainerEntityManagerFactoryBean 提供了非常灵活的配置，persistence.xml 中的信息都可以在此以属性注入的方式提供。 </li>
<li>其次，Spring 实现了部分在 EJB 容器环境下才具有的功能，比如对 @PersistenceContext、@PersistenceUnit 的容器注入支持。 </li>
<li>第三，也是最具意义的，Spring 将 EntityManager 的创建与销毁、事务管理等代码抽取出来，并由其统一管理，开发者不需要关心这些，如前面的代码所示，业务方法中只剩下操作领域对象的代码，事务管理和 EntityManager 创建、销毁的代码都不再需要开发者关心了。 </li>
</ul>
<h2 id="更进一步：Spring-Data-JPA-让一切近乎完美"><a href="#更进一步：Spring-Data-JPA-让一切近乎完美" class="headerlink" title="更进一步：Spring Data JPA 让一切近乎完美"></a>更进一步：Spring Data JPA 让一切近乎完美</h2><p>通过前面的分析可以看出，Spring 对 JPA 的支持已经非常强大，开发者只需关心核心业务逻辑的实现代码，无需过多关注 EntityManager<br>的创建、事务处理等 JPA 相关的处理，这基本上也是作为一个开发框架而言所能做到的极限了。然而，Spring 开发小组并没有止步，他们再接再厉，于最近推出了<br>Spring Data JPA 框架，主要针对的就是 Spring<br>唯一没有简化到的业务逻辑代码，至此，开发者连仅剩的实现持久层业务逻辑的工作都省了，唯一要做的，就只是声明持久层的接口，其他都交给 Spring Data<br>JPA 来帮你完成！</p>
<p>至此，读者可能会存在一个疑问，框架怎么可能代替开发者实现业务逻辑呢？毕竟，每一个应用的持久层业务甚至<br>领域对象都不尽相同，框架是怎么做到的呢？其实这背后的思想并不复杂，比如，当你看到 UserDao.findUserById()<br>这样一个方法声明，大致应该能判断出这是根据给定条件的 ID 查询出满足条件的 User 对象。Spring Data JPA<br>做的便是规范方法的名字，根据符合规范的名字来确定方法需要实现什么样的逻辑。</p>
<p>接下来我们针对前面的例子进行改造，让 Spring Data JPA 来帮助我们完成业务逻辑。在着手写代码之前，开发者需要先 <a href="http://s3.amazonaws.com/dist.springframework.org/release/DATAJPA/spring-
data-jpa-1.0.1.RELEASE.zip" target="_blank" rel="noopener"> 下载
</a> Spring Data JPA 的发布包（需要同时下载 Spring Data Commons 和<br>Spring Data JPA 两个发布包，Commons 是 Spring Data 的公共基础包），并把相关的依赖 JAR 文件加入到<br>CLASSPATH 中。</p>
<p>首先，让持久层接口 UserDao 继承 Repository<br>接口。该接口使用了泛型，需要为其提供两个类型：第一个为该接口处理的域对象类型，第二个为该域对象的主键类型。修改后的 UserDao 如下：</p>
<h5 id="清单-12-Spring-Data-JPA-风格的持久层接口"><a href="#清单-12-Spring-Data-JPA-风格的持久层接口" class="headerlink" title="清单 12. Spring Data JPA 风格的持久层接口"></a>清单 12. Spring Data JPA 风格的持久层接口</h5><pre><code>public interface UserDao extends Repository&lt;AccountInfo, Long&gt; { 
   public AccountInfo save(AccountInfo accountInfo); 
}
</code></pre><p>然后删除 UserDaoImpl 类，因为我们前面说过，框架会为我们完成业务逻辑。最后，我们需要在 Spring 配置文件中增加如下配置，以使 Spring<br>识别出需要为其实现的持久层接口：</p>
<h5 id="清单-13-在-Spring-配置文件中启用扫描并自动创建代理的功能"><a href="#清单-13-在-Spring-配置文件中启用扫描并自动创建代理的功能" class="headerlink" title="清单 13. 在 Spring 配置文件中启用扫描并自动创建代理的功能"></a>清单 13. 在 Spring 配置文件中启用扫描并自动创建代理的功能</h5><pre><code>&lt;-- 需要在 &lt;beans&gt; 标签中增加对 jpa 命名空间的引用 --&gt; 
 &lt;jpa:repositories base-package=&quot;footmark.springdata.jpa.dao&quot;
 entity-manager-factory-ref=&quot;entityManagerFactory&quot; 
 transaction-manager-ref=&quot;transactionManager&quot;/&gt;
</code></pre><p>至此便大功告成了！执行一下测试代码，然后看一下数据库，新的数据已经如我们预期的添加到表中了。如果要再增加新的持久层业务，比如希望查询出给 ID 的<br>AccountInfo 对象，该怎么办呢？很简单，在 UserDao 接口中增加一行代码即可：</p>
<h5 id="清单-14-修改后的持久层接口，增加一个方法声明"><a href="#清单-14-修改后的持久层接口，增加一个方法声明" class="headerlink" title="清单 14. 修改后的持久层接口，增加一个方法声明"></a>清单 14. 修改后的持久层接口，增加一个方法声明</h5><pre><code>1 public interface UserDao extends Repository&lt;AccountInfo, Long&gt; { 
2 
3  public AccountInfo save(AccountInfo accountInfo); 
4 
5  // 你需要做的，仅仅是新增如下一行方法声明
6  public AccountInfo findByAccountId(Long accountId); 
7  }
</code></pre><p>下面总结一下使用 Spring Data JPA 进行持久层开发大致需要的三个步骤：</p>
<ol>
<li>声明持久层的接口，该接口继承 Repository，Repository 是一个标记型接口，它不包含任何方法，当然如果有需要，Spring Data 也提供了若干 Repository 子接口，其中定义了一些常用的增删改查，以及分页相关的方法。 </li>
<li>在接口中声明需要的业务方法。Spring Data 将根据给定的策略（具体策略稍后讲解）来为其生成实现代码。 </li>
<li>在 Spring 配置文件中增加一行声明，让 Spring 为声明的接口创建代理对象。配置了 <a href="jpa:repositories" target="_blank" rel="noopener">jpa:repositories</a> 后，Spring 初始化容器时将会扫描 base-package 指定的包目录及其子目录，为继承 Repository 或其子接口的接口创建代理对象，并将代理对象注册为 Spring Bean，业务层便可以通过 Spring 自动封装的特性来直接使用该对象。 </li>
</ol>
<p>此 外，<a href="jpa:repository" target="_blank" rel="noopener">jpa:repository</a> 还提供了一些属性和子标签，便于做更细粒度的控制。可以在 <a href="jpa:repository" target="_blank" rel="noopener">jpa:repository</a> 内部使用<br><a href="context:include-filter" target="_blank" rel="noopener">context:include-filter</a>、<a href="context:exclude-filter" target="_blank" rel="noopener">context:exclude-filter</a> 来过滤掉一些不希望被扫描到的接口。具体的使用方法见 <a href="http://static.springsource.org/spring/docs/3.0.x/spring-framework-
reference/html/beans.html#beans-classpath-scanning" target="_blank" rel="noopener"><br>Spring </a> <a href="http://static.springsource.org/spring/docs/3.0.x/spring-framework-
reference/html/beans.html#beans-classpath-scanning" target="_blank" rel="noopener"> 参考文档
</a> 。</p>
<h3 id="应该继承哪个接口？"><a href="#应该继承哪个接口？" class="headerlink" title="应该继承哪个接口？"></a>应该继承哪个接口？</h3><p>前 面提到，持久层接口继承 Repository 并不是唯一选择。Repository 接口是 Spring Data<br>的一个核心接口，它不提供任何方法，开发者需要在自己定义的接口中声明需要的方法。与继承 Repository 等价的一种方式，就是在持久层接口上使用<br>@RepositoryDefinition 注解，并为其指定 domainClass 和 idClass 属性。如下两种方式是完全等价的：</p>
<h5 id="清单-15-两种等价的继承接口方式示例"><a href="#清单-15-两种等价的继承接口方式示例" class="headerlink" title="清单 15. 两种等价的继承接口方式示例"></a>清单 15. 两种等价的继承接口方式示例</h5><pre><code>1 public interface UserDao extends Repository&lt;AccountInfo, Long&gt; { …… } 
2 
3  @RepositoryDefinition(domainClass = AccountInfo.class, idClass = Long.class) 
4  public interface UserDao { …… }
</code></pre><p>如果持久层接口较多，且每一个接口都需要声明相似的增删改查方法，直接继承 Repository 就显得有些啰嗦，这时可以继承<br>CrudRepository，它会自动为域对象创建增删改查方法，供业务层直接使用。开发者只是多写了 “Crud”<br>四个字母，即刻便为域对象提供了开箱即用的十个增删改查方法。</p>
<p>但是，使用 CrudRepository<br>也有副作用，它可能暴露了你不希望暴露给业务层的方法。比如某些接口你只希望提供增加的操作而不希望提供删除的方法。针对这种情况，开发者只能退回到<br>Repository 接口，然后到 CrudRepository 中把希望保留的方法声明复制到自定义的接口中即可。</p>
<p>分页查询和排序是 持久层常用的功能，Spring Data 为此提供了 PagingAndSortingRepository 接口，它继承自<br>CrudRepository 接口，在 CrudRepository 基础上新增了两个与分页有关的方法。但是，我们很少会将自定义的持久层接口直接继承自<br>PagingAndSortingRepository，而是在继承 Repository 或 CrudRepository<br>的基础上，在自己声明的方法参数列表最后增加一个 Pageable 或 Sort 类型的参数，用于指定分页或排序信息即可，这比直接使用<br>PagingAndSortingRepository 提供了更大的灵活性。</p>
<p>JpaRepository 是继承自 PagingAndSortingRepository 的针对 JPA<br>技术提供的接口，它在父接口的基础上，提供了其他一些方法，比如 flush()，saveAndFlush()，deleteInBatch()<br>等。如果有这样的需求，则可以继承该接口。</p>
<p>上述四个接 口，开发者到底该如何选择？其实依据很简单，根据具体的业务需求，选择其中之一。笔者建议在通常情况下优先选择 Repository 接口。因为<br>Repository 接口已经能满足日常需求，其他接口能做到的在 Repository 中也能做到，彼此之间并不存在功能强弱的问题。只是<br>Repository 需要显示声明需要的方法，而其他则可能已经提供了相关的方法，不需要再显式声明，但如果对 Spring Data JPA<br>不熟悉，别人在检视代码或者接手相关代码时会有疑惑，他们不明白为什么明明在持久层接口中声明了三个方法，而在业务层使用该接口时，却发现有七八个方法可<br>用，从这个角度而言，应该优先考虑使用 Repository 接口。</p>
<p>前面提到，Spring Data JPA<br>在后台为持久层接口创建代理对象时，会解析方法名字，并实现相应的功能。除了通过方法名字以外，它还可以通过如下两种方式指定查询语句：</p>
<ol>
<li>Spring Data JPA 可以访问 JPA 命名查询语句。开发者只需要在定义命名查询语句时，为其指定一个符合给定格式的名字，Spring Data JPA 便会在创建代理对象时，使用该命名查询语句来实现其功能。 </li>
<li>开发者还可以直接在声明的方法上面使用 @Query 注解，并提供一个查询语句作为参数，Spring Data JPA 在创建代理对象时，便以提供的查询语句来实现其功能。 </li>
</ol>
<p>下面我们分别讲述三种创建查询的方式。</p>
<h3 id="通过解析方法名创建查询"><a href="#通过解析方法名创建查询" class="headerlink" title="通过解析方法名创建查询"></a>通过解析方法名创建查询</h3><p>通 过前面的例子，读者基本上对解析方法名创建查询的方式有了一个大致的了解，这也是 Spring Data JPA<br>吸引开发者的一个很重要的因素。该功能其实并非 Spring Data JPA 首创，而是源自一个开源的 JPA 框架 Hades，该框架的作者 Oliver<br>Gierke 本身又是 Spring Data JPA 项目的 Leader，所以把 Hades 的优势引入到 Spring Data JPA<br>也就是顺理成章的了。</p>
<p>框架在进行方法名解析时，会先把方法名多余的前缀截取掉，比如<br>find、findBy、read、readBy、get、getBy，然后对剩下部分进行解析。并且如果方法的最后一个参数是 Sort 或者 Pageable<br>类型，也会提取相关的信息，以便按规则进行排序或者分页查询。</p>
<p>在创建查询时，我们通过在方法名中使用属性名称来表达，比如 findByUserAddressZip ()。框架在解析该方法时，首先剔除<br>findBy，然后对剩下的属性进行解析，详细规则如下（此处假设该方法针对的域对象为 AccountInfo 类型）：</p>
<ul>
<li>先判断 userAddressZip （根据 POJO 规范，首字母变为小写，下同）是否为 AccountInfo 的一个属性，如果是，则表示根据该属性进行查询；如果没有该属性，继续第二步； </li>
<li>从右往左截取第一个大写字母开头的字符串（此处为 Zip），然后检查剩下的字符串是否为 AccountInfo 的一个属性，如果是，则表示根据该属性进行查询；如果没有该属性，则重复第二步，继续从右往左截取；最后假设 user 为 AccountInfo 的一个属性； </li>
<li>接着处理剩下部分（ AddressZip ），先判断 user 所对应的类型是否有 addressZip 属性，如果有，则表示该方法最终是根据 “AccountInfo.user.addressZip” 的取值进行查询；否则继续按照步骤 2 的规则从右往左截取，最终表示根据 “AccountInfo.user.address.zip” 的值进行查询。 </li>
</ul>
<p>可能会存在一种特殊情况，比如 AccountInfo 包含一个 user 的属性，也有一个 userAddress<br>属性，此时会存在混淆。读者可以明确在属性之间加上 “_” 以显式表达意图，比如 “findByUser_AddressZip()” 或者<br>“findByUserAddress_Zip()”。</p>
<p>在查询时，通常需要同时根据多个属性进行查询，且查询的条件也格式各样（大于某个值、在某个范围等等），Spring Data JPA<br>为此提供了一些表达条件查询的关键字，大致如下：</p>
<ul>
<li>And — 等价于 SQL 中的 and 关键字，比如 findByUsernameAndPassword(String user, Striang pwd)； </li>
<li>Or — 等价于 SQL 中的 or 关键字，比如 findByUsernameOrAddress(String user, String addr)； </li>
<li>Between — 等价于 SQL 中的 between 关键字，比如 findBySalaryBetween(int max, int min)； </li>
<li>LessThan — 等价于 SQL 中的 “&lt;”，比如 findBySalaryLessThan(int max)； </li>
<li>GreaterThan — 等价于 SQL 中的”&gt;”，比如 findBySalaryGreaterThan(int min)； </li>
<li>IsNull — 等价于 SQL 中的 “is null”，比如 findByUsernameIsNull()； </li>
<li>IsNotNull — 等价于 SQL 中的 “is not null”，比如 findByUsernameIsNotNull()； </li>
<li>NotNull — 与 IsNotNull 等价； </li>
<li>Like — 等价于 SQL 中的 “like”，比如 findByUsernameLike(String user)； </li>
<li>NotLike — 等价于 SQL 中的 “not like”，比如 findByUsernameNotLike(String user)； </li>
<li>OrderBy — 等价于 SQL 中的 “order by”，比如 findByUsernameOrderBySalaryAsc(String user)； </li>
<li>Not — 等价于 SQL 中的 “！ =”，比如 findByUsernameNot(String user)； </li>
<li>In — 等价于 SQL 中的 “in”，比如 findByUsernameIn(Collection<string> userList) ，方法的参数可以是 Collection 类型，也可以是数组或者不定长参数； </string></li>
<li>NotIn — 等价于 SQL 中的 “not in”，比如 findByUsernameNotIn(Collection<string> userList) ，方法的参数可以是 Collection 类型，也可以是数组或者不定长参数； </string></li>
</ul>
<h3 id="使用-Query-创建查询"><a href="#使用-Query-创建查询" class="headerlink" title="使用 @Query 创建查询"></a>使用 @Query 创建查询</h3><p>@Query 注解的使用非常简单，只需在声明的方法上面标注该注解，同时提供一个 JP QL 查询语句即可，如下所示：</p>
<h5 id="清单-16-使用-Query-提供自定义查询语句示例"><a href="#清单-16-使用-Query-提供自定义查询语句示例" class="headerlink" title="清单 16. 使用 @Query 提供自定义查询语句示例"></a>清单 16. 使用 @Query 提供自定义查询语句示例</h5><pre><code>1 public interface UserDao extends Repository&lt;AccountInfo, Long&gt; { 
2 
3  @Query(&quot;select a from AccountInfo a where a.accountId = ?1&quot;) 
4  public AccountInfo findByAccountId(Long accountId); 
5 
6     @Query(&quot;select a from AccountInfo a where a.balance &gt; ?1&quot;) 
7  public Page&lt;AccountInfo&gt; findByBalanceGreaterThan( 
8  Integer balance,Pageable pageable); 
9  }
</code></pre><p>很多开发者在创建 JP QL 时喜欢使用命名参数来代替位置编号，@Query 也对此提供了支持。JP QL 语句中通过”:<br>变量”的格式来指定参数，同时在方法的参数前面使用 @Param 将方法参数与 JP QL 中的命名参数对应，示例如下：</p>
<h5 id="清单-17-Query-支持命名参数示例"><a href="#清单-17-Query-支持命名参数示例" class="headerlink" title="清单 17. @Query 支持命名参数示例"></a>清单 17. @Query 支持命名参数示例</h5><pre><code> 1 public interface UserDao extends Repository&lt;AccountInfo, Long&gt; { 
 2 
 3  public AccountInfo save(AccountInfo accountInfo); 
 4 
 5  @Query(&quot;from AccountInfo a where a.accountId = :id&quot;) 
 6  public AccountInfo findByAccountId(@Param(&quot;id&quot;)Long accountId); 
 7 
 8    @Query(&quot;from AccountInfo a where a.balance &gt; :balance&quot;) 
 9    public Page&lt;AccountInfo&gt; findByBalanceGreaterThan( 
10  @Param(&quot;balance&quot;)Integer balance,Pageable pageable); 
11  }
</code></pre><p>此外，开发者也可以通过使用 @Query 来执行一个更新操作，为此，我们需要在使用 @Query 的同时，用 @Modifying<br>来将该操作标识为修改查询，这样框架最终会生成一个更新的操作，而非查询。如下所示：</p>
<h5 id="清单-18-使用-Modifying-将查询标识为修改查询"><a href="#清单-18-使用-Modifying-将查询标识为修改查询" class="headerlink" title="清单 18. 使用 @Modifying 将查询标识为修改查询"></a>清单 18. 使用 @Modifying 将查询标识为修改查询</h5><pre><code>1 @Modifying 
2  @Query(&quot;update AccountInfo a set a.salary = ?1 where a.salary &lt; ?2&quot;) 
3  public int increaseSalary(int after, int before);
</code></pre><h3 id="通过调用-JPA-命名查询语句创建查询"><a href="#通过调用-JPA-命名查询语句创建查询" class="headerlink" title="通过调用 JPA 命名查询语句创建查询"></a>通过调用 JPA 命名查询语句创建查询</h3><p>命名查询是 JPA 提供的一种将查询语句从方法体中独立出来，以供多个方法共用的功能。Spring Data JPA<br>对命名查询也提供了很好的支持。用户只需要按照 JPA 规范在 orm.xml 文件或者在代码中使用 @NamedQuery（或<br>@NamedNativeQuery）定义好查询语句，唯一要做的就是为该语句命名时，需要满足”DomainClass.methodName()”的<br>命名规则。假设定义了如下接口：</p>
<h5 id="清单-19-使用-JPA-命名查询时，声明接口及方法时不需要什么特殊处理"><a href="#清单-19-使用-JPA-命名查询时，声明接口及方法时不需要什么特殊处理" class="headerlink" title="清单 19. 使用 JPA 命名查询时，声明接口及方法时不需要什么特殊处理"></a>清单 19. 使用 JPA 命名查询时，声明接口及方法时不需要什么特殊处理</h5><pre><code>1 public interface UserDao extends Repository&lt;AccountInfo, Long&gt; { 
2 
3  ...... 
4    
5  public List&lt;AccountInfo&gt; findTop5(); 
6  }
</code></pre><p>如果希望为 findTop5() 创建命名查询，并与之关联，我们只需要在适当的位置定义命名查询语句，并将其命名为<br>“AccountInfo.findTop5”，框架在创建代理类的过程中，解析到该方法时，优先查找名为 “AccountInfo.findTop5”<br>的命名查询定义，如果没有找到，则尝试解析方法名，根据方法名字创建查询。</p>
<h3 id="创建查询的顺序"><a href="#创建查询的顺序" class="headerlink" title="创建查询的顺序"></a>创建查询的顺序</h3><p>Spring Data JPA 在为接口创建代理对象时，如果发现同时存在多种上述情况可用，它该优先采用哪种策略呢？为此，<a href="jpa:repositories" target="_blank" rel="noopener">jpa:repositories</a><br>提供了 query-lookup-strategy 属性，用以指定查找的顺序。它有如下三个取值：</p>
<ul>
<li>create — 通过解析方法名字来创建查询。即使有符合的命名查询，或者方法通过 @Query 指定的查询语句，都将会被忽略。 </li>
<li>create-if-not-found — 如果方法通过 @Query 指定了查询语句，则使用该语句实现查询；如果没有，则查找是否定义了符合条件的命名查询，如果找到，则使用该命名查询；如果两者都没有找到，则通过解析方 法名字来创建查询。这是 query-lookup-strategy 属性的默认值。 </li>
<li>use-declared-query — 如果方法通过 @Query 指定了查询语句，则使用该语句实现查询；如果没有，则查找是否定义了符合条件的命名查询，如果找到，则使用该命名查询；如果两者都没有找到，则抛出异常。 </li>
</ul>
<h3 id="Spring-Data-JPA-对事务的支持"><a href="#Spring-Data-JPA-对事务的支持" class="headerlink" title="Spring Data JPA 对事务的支持"></a>Spring Data JPA 对事务的支持</h3><p>默 认情况下，Spring Data JPA 实现的方法都是使用事务的。针对查询类型的方法，其等价于<br>@Transactional(readOnly=true)；增删改类型的方法，等价于<br>@Transactional。可以看出，除了将查询的方法设为只读事务外，其他事务属性均采用默认值。</p>
<p>如果用户觉得有必要，可以在接口方 法上使用 @Transactional 显式指定事务属性，该值覆盖 Spring Data JPA<br>提供的默认值。同时，开发者也可以在业务层方法上使用 @Transactional<br>指定事务属性，这主要针对一个业务层方法多次调用持久层方法的情况。持久层的事务会根据设置的事务传播行为来决定是挂起业务层事务还是加入业务层的事务。 具体<br>@Transactional 的使用，请参考 <a href="http://static.springsource.org/spring/docs/3.0.x/spring-framework-
reference/html/transaction.html#transaction-declarative-annotations" target="_blank" rel="noopener"> Spring
</a> <a href="http://static.springsource.org/spring/docs/3.0.x/spring-framework-
reference/html/transaction.html#transaction-declarative-annotations" target="_blank" rel="noopener"> 的参考文档
</a> 。</p>
<h3 id="为接口中的部分方法提供自定义实现"><a href="#为接口中的部分方法提供自定义实现" class="headerlink" title="为接口中的部分方法提供自定义实现"></a>为接口中的部分方法提供自定义实现</h3><p>有些时候，开发者可能需要在某些方法中做一些特殊的处理，此时自动生成的代理对象不能完全满足要求。为了享受 Spring Data JPA<br>带给我们的便利，同时又能够为部分方法提供自定义实现，我们可以采用如下的方法：</p>
<ul>
<li>将需要开发者手动实现的方法从持久层接口（假设为 AccountDao ）中抽取出来，独立成一个新的接口（假设为 AccountDaoPlus ），并让 AccountDao 继承 AccountDaoPlus； </li>
<li>为 AccountDaoPlus 提供自定义实现（假设为 AccountDaoPlusImpl ）； </li>
<li>将 AccountDaoPlusImpl 配置为 Spring Bean； </li>
<li>在 <a href="jpa:repositories" target="_blank" rel="noopener">jpa:repositories</a> 中按清单 19 的方式进行配置。 </li>
</ul>
<h5 id="清单-20-指定自定义实现类"><a href="#清单-20-指定自定义实现类" class="headerlink" title="清单 20. 指定自定义实现类"></a>清单 20. 指定自定义实现类</h5><pre><code>&lt;jpa:repositories base-package=&quot;footmark.springdata.jpa.dao&quot;&gt; 
 &lt;jpa:repository id=&quot;accountDao&quot; repository-impl-ref=&quot; accountDaoPlus &quot; /&gt; 
 &lt;/jpa:repositories&gt; 

 &lt;bean id=&quot;accountDaoPlus&quot; class=&quot;.......&quot;/&gt;
</code></pre><p>此外，&lt;jpa:repositories &gt; 提供了一个 repository-impl-postfix 属性，用以指定实现类的后缀。假设做了如下配置：</p>
<h5 id="清单-21-设置自动查找时默认的自定义实现类命名规则"><a href="#清单-21-设置自动查找时默认的自定义实现类命名规则" class="headerlink" title="清单 21. 设置自动查找时默认的自定义实现类命名规则"></a>清单 21. 设置自动查找时默认的自定义实现类命名规则</h5><pre><code>1 &lt;jpa:repositories base-package=&quot;footmark.springdata.jpa.dao&quot;
2  repository-impl-postfix=&quot;Impl&quot;/&gt;
</code></pre><p>则在框架扫描到 AccountDao 接口时，它将尝试在相同的包目录下查找<br>AccountDaoImpl.java，如果找到，便将其中的实现方法作为最终生成的代理类中相应方法的实现。</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">


    <div class="bdsharebuttonbox">
    <a href="#" class="bds_more" data-cmd="more">分享到：</a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间">QQ空间</a>
    <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博">新浪微博</a>
    <a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博">腾讯微博</a>
    <a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网">人人网</a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信">微信</a>
</div>
<script>
window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{"bdSize":16}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script>
<style>
    .bdshare_popup_box {
        border-radius: 4px;
        border: #e1e1e1 solid 1px;
    }
    .bdshare-button-style0-16 a,
    .bdshare-button-style0-16 .bds_more {
        padding-left: 20px;
        margin: 6px 10px 6px 0;
    }
    .bdshare_dialog_list a,
    .bdshare_popup_list a,
    .bdshare_popup_bottom a {
        font-family: 'Microsoft Yahei';
    }
    .bdshare_popup_top {
        display: none;
    }
    .bdshare_popup_bottom {
        height: auto;
        padding: 5px;
    }
</style>


</div>

            
    
        <a href="https://www.itchina.top/2018/04/20/使用 Spring Data JPA 简化 JPA 开发/#comments" id="sourceId::2018/04/20/使用 Spring Data JPA 简化 JPA 开发/" class="article-comment-link cy_cmt_count">评论</a>
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2018/04/20/图片转换PDF文件/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">上一篇</strong>
            <div class="article-nav-title">
                
                    图片转换PDF文件
                
            </div>
        </a>
    
    
        <a href="/2018/04/20/通过Ajax进行POST提交JSON类型的数据到SpringMVC Controller的方法/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">下一篇</strong>
            <div class="article-nav-title">通过Ajax进行POST提交JSON类型的数据到SpringMVC Controller的方法</div>
        </a>
    
</nav>


    
</article>


    
    
        <section id="comments">
    <div id="SOHUCS" sid="2018/04/20/使用 Spring Data JPA 简化 JPA 开发/"></div>
</section>
    

</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="no-thumbnail">
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Spring/">Spring</a></p>
                            <p class="item-title"><a href="/2018/04/20/在Docker容器中运行Spring Boot应用/" class="title">在Docker容器中运行Spring Boot应用</a></p>
                            <p class="item-date"><time datetime="2018-04-19T16:34:21.469Z" itemprop="datePublished">2018-04-20</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/集群/">集群</a></p>
                            <p class="item-title"><a href="/2018/04/20/小白科普：分布式和集群/" class="title">小白科普：分布式和集群</a></p>
                            <p class="item-date"><time datetime="2018-04-19T16:34:21.468Z" itemprop="datePublished">2018-04-20</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/IDE/">IDE</a></p>
                            <p class="item-title"><a href="/2018/04/20/项目相关的CVS操作/" class="title">项目相关的CVS操作</a></p>
                            <p class="item-date"><time datetime="2018-04-19T16:34:21.467Z" itemprop="datePublished">2018-04-20</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/J2EE/">J2EE</a></p>
                            <p class="item-title"><a href="/2018/04/20/图片转换PDF文件/" class="title">图片转换PDF文件</a></p>
                            <p class="item-date"><time datetime="2018-04-19T16:34:21.449Z" itemprop="datePublished">2018-04-20</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Spring/">Spring</a></p>
                            <p class="item-title"><a href="/2018/04/20/使用 Spring Data JPA 简化 JPA 开发/" class="title">使用 Spring Data JPA 简化 JPA 开发</a></p>
                            <p class="item-date"><time datetime="2018-04-19T16:34:21.448Z" itemprop="datePublished">2018-04-20</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ActiveMQ/">ActiveMQ</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ExtJs/">ExtJs</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDE/">IDE</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/J2EE/">J2EE</a><span class="category-list-count">7</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/J2EE/Spring/">Spring</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/">Spring</a><span class="category-list-count">21</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/cnn图片数据处理、显示/">cnn图片数据处理、显示</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/cnn图片数据处理、显示/python数据分析/">python数据分析</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/web前端/">web前端</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/集群/">集群</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/集群/">集群</a><span class="category-list-count">2</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">归档</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a><span class="archive-list-count">65</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">标签</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Apache/">Apache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/">Docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Druid/">Druid</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ImageToPDF/">ImageToPDF</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Logstash/">Logstash</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Boot/">Spring Boot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/activemq/">activemq</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ajax/">ajax</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cas/">cas</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/exception/">exception</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ext/">ext</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/extjs/">extjs</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/find/">find</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ide/">ide</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/idea/">idea</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jboss/">jboss</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jmx/">jmx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jpa/">jpa</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lombok/">lombok</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mvc/">mvc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mybatis/">mybatis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/numpy/">numpy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/seo/">seo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/server/">server</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shiro/">shiro</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/">spring</a><span class="tag-list-count">17</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring-mvc/">spring mvc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring-boo/">spring-boo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql-server/">sql server</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows/">windows</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zookeeper/">zookeeper</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/优化/">优化</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分布式日志/">分布式日志</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/多线程/">多线程</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工作/">工作</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/异常/">异常</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/异常处理/">异常处理</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/搜索引擎/">搜索引擎</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据分析/">数据分析</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/汉字转拼音/">汉字转拼音</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/版本控制系统/">版本控制系统</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/程序员/">程序员</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/经验/">经验</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/集群/">集群</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/面试/">面试</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/Apache/" style="font-size: 10px;">Apache</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/Druid/" style="font-size: 10px;">Druid</a> <a href="/tags/ImageToPDF/" style="font-size: 10px;">ImageToPDF</a> <a href="/tags/Logstash/" style="font-size: 10px;">Logstash</a> <a href="/tags/Spring-Boot/" style="font-size: 10px;">Spring Boot</a> <a href="/tags/activemq/" style="font-size: 18px;">activemq</a> <a href="/tags/ajax/" style="font-size: 10px;">ajax</a> <a href="/tags/angular/" style="font-size: 10px;">angular</a> <a href="/tags/cas/" style="font-size: 10px;">cas</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/exception/" style="font-size: 10px;">exception</a> <a href="/tags/ext/" style="font-size: 14px;">ext</a> <a href="/tags/extjs/" style="font-size: 14px;">extjs</a> <a href="/tags/find/" style="font-size: 10px;">find</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/ide/" style="font-size: 12px;">ide</a> <a href="/tags/idea/" style="font-size: 10px;">idea</a> <a href="/tags/java/" style="font-size: 16px;">java</a> <a href="/tags/javascript/" style="font-size: 12px;">javascript</a> <a href="/tags/jboss/" style="font-size: 10px;">jboss</a> <a href="/tags/jmx/" style="font-size: 10px;">jmx</a> <a href="/tags/jpa/" style="font-size: 10px;">jpa</a> <a href="/tags/linux/" style="font-size: 14px;">linux</a> <a href="/tags/lombok/" style="font-size: 10px;">lombok</a> <a href="/tags/mvc/" style="font-size: 10px;">mvc</a> <a href="/tags/mybatis/" style="font-size: 10px;">mybatis</a> <a href="/tags/mysql/" style="font-size: 12px;">mysql</a> <a href="/tags/nginx/" style="font-size: 10px;">nginx</a> <a href="/tags/numpy/" style="font-size: 10px;">numpy</a> <a href="/tags/seo/" style="font-size: 10px;">seo</a> <a href="/tags/server/" style="font-size: 10px;">server</a> <a href="/tags/shiro/" style="font-size: 12px;">shiro</a> <a href="/tags/spring/" style="font-size: 20px;">spring</a> <a href="/tags/spring-mvc/" style="font-size: 10px;">spring mvc</a> <a href="/tags/spring-boo/" style="font-size: 10px;">spring-boo</a> <a href="/tags/sql-server/" style="font-size: 10px;">sql server</a> <a href="/tags/windows/" style="font-size: 10px;">windows</a> <a href="/tags/zookeeper/" style="font-size: 10px;">zookeeper</a> <a href="/tags/优化/" style="font-size: 12px;">优化</a> <a href="/tags/分布式日志/" style="font-size: 10px;">分布式日志</a> <a href="/tags/多线程/" style="font-size: 10px;">多线程</a> <a href="/tags/工作/" style="font-size: 10px;">工作</a> <a href="/tags/异常/" style="font-size: 10px;">异常</a> <a href="/tags/异常处理/" style="font-size: 10px;">异常处理</a> <a href="/tags/搜索引擎/" style="font-size: 12px;">搜索引擎</a> <a href="/tags/数据分析/" style="font-size: 10px;">数据分析</a> <a href="/tags/汉字转拼音/" style="font-size: 10px;">汉字转拼音</a> <a href="/tags/版本控制系统/" style="font-size: 10px;">版本控制系统</a> <a href="/tags/程序员/" style="font-size: 10px;">程序员</a> <a href="/tags/经验/" style="font-size: 10px;">经验</a> <a href="/tags/集群/" style="font-size: 10px;">集群</a> <a href="/tags/面试/" style="font-size: 10px;">面试</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://www.baidu.com">百度</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>

            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2018 LErry Li<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        
    
    <script id="cy_cmt_num" src="https://changyan.sohu.com/upload/plugins/plugins.list.count.js?clientId=cytxPSIHr"></script>
    <script charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/changyan.js" ></script>
    <script type="text/javascript">
    window.changyan.api.config({
    appid: 'cytxPSIHr',
    conf: 'prod_3c92d05d8ba4377e48c5fe27c2159761'
    });
    </script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>